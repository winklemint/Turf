
{{template "header.html"}}
	<div class="xs-pd-20-10 pd-ltr-20">
		<div class="title pb-20">
			<h2 class="h3 mb-0">Hospital Overview</h2>
		</div>

		<div class="row pb-10">	 	
			<div class="col-xl-3 col-lg-3 col-md-6 mb-20">
				<div class="card-box height-100-p widget-style3">
					<div class="d-flex flex-wrap">
						<div class="widget-data">
							<div id="total-booking-count" class="weight-700 font-24 text-dark">Loading...</div>
							<div class="font-14 text-secondary weight-500">
								Today Bookings
							</div>
						</div>
						<div class="widget-icon">
							<div class="icon" data-color="#00eccf">
								<i class="icon-copy dw dw-calendar1"></i>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-xl-3 col-lg-3 col-md-6 mb-20">
				<div class="card-box height-100-p widget-style3">
					<div class="d-flex flex-wrap">
						<div class="widget-data">
							<div id="total-user-count" class="weight-700 font-24 text-dark">Loading...</div>
							<div class="font-14 text-secondary weight-500">
								Total Users
							</div>
						</div>
						
						<div class="widget-icon">
							<div class="icon" data-color="#ff5b5b">
								<i class="icon-copy bi bi-people"></i>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-xl-3 col-lg-3 col-md-6 mb-20">
				<div class="card-box height-100-p widget-style3">
					<div class="d-flex flex-wrap">
						<div class="widget-data">
							<div class="weight-700 font-24 text-dark">400+</div>
							<div class="font-14 text-secondary weight-500">
								Total Doctor
							</div>
						</div>
						<div class="widget-icon">
							<div class="icon">
								<i
									class="icon-copy fa fa-stethoscope"
									aria-hidden="true"
								></i>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-xl-3 col-lg-3 col-md-6 mb-20">
				<div class="card-box height-100-p widget-style3">
					<div class="d-flex flex-wrap">
						<div class="widget-data">
							<div class="weight-700 font-24 text-dark">$50,000</div>
							<div class="font-14 text-secondary weight-500">Earning</div>
						</div>
						<div class="widget-icon">
							<div class="icon" data-color="#09cc06">
								<i class="icon-copy fa fa-money" aria-hidden="true"></i>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="row pb-10">
			<div class="col-md-8 mb-20">
				<div class="card-box height-100-p pd-20">
					<div
						class="d-flex flex-wrap justify-content-between align-items-center pb-0 pb-md-3"
					>
						<div class="h5 mb-md-0">Hospital Activities</div>
						<div class="form-group mb-md-0">
							<select class="form-control form-control-sm selectpicker">
								<option value="">Last Week</option>
								<option value="">Last Month</option>
								<option value="">Last 6 Month</option>
								<option value="">Last 1 year</option>
							</select>
						</div>
					</div>
					<div id="activities-chart"></div>
				</div>
			</div>
			<div class="col-md-4 mb-20">
				<div class="card-box min-height-200px pd-20 mb-20" data-bgcolor="#455a64">
					<div class="d-flex justify-content-between pb-20 text-white">
						<div class="icon h1 text-white">
							<div class="font-10">Live</div>
							
						</div>
					</div>
					<div class="d-flex justify-content-between align-items-end">
						
						<div class="max-width-150">
							<div id="appointment-chart">
								<div>
									<i class="icon-copy bi bi-person-fill"></i> <span id="user-name"></span>
								</div>
								<div>
									<i class="icon-copy bi bi-telephone-fill"></i> <span id="contact-number"></span>
								</div>
								<div>
									<i class="icon-copy bi bi-clock"></i> <span id="start-time"></span> - <span id="end-time"></span>
								</div>
							</div>
						</div>
					</div>
				</div>
				
				<div class="card-box min-height-200px pd-20" data-bgcolor="#265ed7">
					<div class="d-flex justify-content-between pb-20 text-white">
						<div class="icon h1 text-white">
							<i class="fa fa-stethoscope" aria-hidden="true"></i>
						</div>
						<div class="font-14 text-right">
							<div><i class="icon-copy ion-arrow-down-c"></i> 3.69%</div>
							<div class="font-12">Since last month</div>
						</div>
					</div>
					<div class="d-flex justify-content-between align-items-end">
						<div class="text-white">
							<div class="font-14">Surgery</div>
							<div class="font-24 weight-500">250</div>
						</div>
						<div class="max-width-150">
							<div id="surgery-chart"></div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-lg-4 col-md-6 mb-20">
				<div class="card-box height-100-p pd-20 min-height-200px">
					<div class="d-flex justify-content-between pb-10">
						<div class="h5 mb-0">Top Doctors</div>
						<div class="dropdown">
							<a
								class="btn btn-link font-24 p-0 line-height-1 no-arrow dropdown-toggle"
								data-color="#1b3133"
								href="#"
								role="button"
								data-toggle="dropdown"
							>
								<i class="dw dw-more"></i>
							</a>
							<div
								class="dropdown-menu dropdown-menu-right dropdown-menu-icon-list"
							>
								<a class="dropdown-item" href="#"
									><i class="dw dw-eye"></i> View</a
								>
								<a class="dropdown-item" href="#"
									><i class="dw dw-edit2"></i> Edit</a
								>
								<a class="dropdown-item" href="#"
									><i class="dw dw-delete-3"></i> Delete</a
								>
							</div>
						</div>
					</div>
					<div class="user-list">
						<ul>
							<li class="d-flex align-items-center justify-content-between">
								<div class="name-avatar d-flex align-items-center pr-2">
									<div class="avatar mr-2 flex-shrink-0">
										<img
											src="https://dropways.github.io/deskapp/vendors/images/photo1.jpg"
											class="border-radius-100 box-shadow"
											width="50"
											height="50"
											alt=""
										/>
									</div>
									<div class="txt">
										<span
											class="badge badge-pill badge-sm"
											data-bgcolor="#e7ebf5"
											data-color="#265ed7"
											>4.9</span
										>
										<div class="font-14 weight-600">Dr. Neil Wagner</div>
										<div class="font-12 weight-500" data-color="#b2b1b6">
											Pediatrician
										</div>
									</div>
								</div>
								<div class="cta flex-shrink-0">
									<a href="#" class="btn btn-sm btn-outline-primary"
										>Schedule</a
									>
								</div>
							</li>
							<li class="d-flex align-items-center justify-content-between">
								<div class="name-avatar d-flex align-items-center pr-2">
									<div class="avatar mr-2 flex-shrink-0">
										<img
											src="https://dropways.github.io/deskapp/vendors/images/photo2.jpg"
											class="border-radius-100 box-shadow"
											width="50"
											height="50"
											alt=""
										/>
									</div>
									<div class="txt">
										<span
											class="badge badge-pill badge-sm"
											data-bgcolor="#e7ebf5"
											data-color="#265ed7"
											>4.9</span
										>
										<div class="font-14 weight-600">Dr. Ren Delan</div>
										<div class="font-12 weight-500" data-color="#b2b1b6">
											Pediatrician
										</div>
									</div>
								</div>
								<div class="cta flex-shrink-0">
									<a href="#" class="btn btn-sm btn-outline-primary"
										>Schedule</a
									>
								</div>
							</li>
							<li class="d-flex align-items-center justify-content-between">
								<div class="name-avatar d-flex align-items-center pr-2">
									<div class="avatar mr-2 flex-shrink-0">
										<img
											src="https://dropways.github.io/deskapp/vendors/images/photo3.jpg"
											class="border-radius-100 box-shadow"
											width="50"
											height="50"
											alt=""
										/>
									</div>
									<div class="txt">
										<span
											class="badge badge-pill badge-sm"
											data-bgcolor="#e7ebf5"
											data-color="#265ed7"
											>4.9</span
										>
										<div class="font-14 weight-600">Dr. Garrett Kincy</div>
										<div class="font-12 weight-500" data-color="#b2b1b6">
											Pediatrician
										</div>
									</div>
								</div>
								<div class="cta flex-shrink-0">
									<a href="#" class="btn btn-sm btn-outline-primary"
										>Schedule</a
									>
								</div>
							</li>
							<li class="d-flex align-items-center justify-content-between">
								<div class="name-avatar d-flex align-items-center pr-2">
									<div class="avatar mr-2 flex-shrink-0">
										<img
											src="https://dropways.github.io/deskapp/vendors/images/photo4.jpg"
											class="border-radius-100 box-shadow"
											width="50"
											height="50"
											alt=""
										/>
									</div>
									<div class="txt">
										<span
											class="badge badge-pill badge-sm"
											data-bgcolor="#e7ebf5"
											data-color="#265ed7"
											>4.9</span
										>
										<div class="font-14 weight-600">Dr. Callie Reed</div>
										<div class="font-12 weight-500" data-color="#b2b1b6">
											Pediatrician
										</div>
									</div>
								</div>
								<div class="cta flex-shrink-0">
									<a href="#" class="btn btn-sm btn-outline-primary"
										>Schedule</a
									>
								</div>
							</li>
						</ul>
					</div>
				</div>
			</div>
			<div class="col-lg-4 col-md-6 mb-20">
				<div class="card-box height-100-p pd-20 min-height-200px">
					<div class="d-flex justify-content-between">
						<div class="h5 mb-0">Diseases Report</div>
						<div class="dropdown">
							<a
								class="btn btn-link font-24 p-0 line-height-1 no-arrow dropdown-toggle"
								data-color="#1b3133"
								href="#"
								role="button"
								data-toggle="dropdown"
							>
								<i class="dw dw-more"></i>
							</a>
							<div
								class="dropdown-menu dropdown-menu-right dropdown-menu-icon-list"
							>
								<a class="dropdown-item" href="#"
									><i class="dw dw-eye"></i> View</a
								>
								<a class="dropdown-item" href="#"
									><i class="dw dw-edit2"></i> Edit</a
								>
								<a class="dropdown-item" href="#"
									><i class="dw dw-delete-3"></i> Delete</a
								>
							</div>
						</div>
					</div>

					<div id="diseases-chart"></div>
				</div>
			</div>
			<div class="col-lg-4 col-md-12 mb-20">
				<div class="card-box height-100-p pd-20 min-height-200px">
					<div class="max-width-300 mx-auto">
						<img src="https://dropways.github.io/deskapp/vendors/images/upgrade.svg" alt="" />
					</div>
					<div class="text-center">
						<div class="h5 mb-1">Upgrade to Pro</div>
						<div
							class="font-14 weight-500 max-width-200 mx-auto pb-20"
							data-color="#a6a6a7"
						>
							You can enjoy all our features by upgrading to pro.
						</div>
						<a href="#" class="btn btn-primary btn-lg">Upgrade</a>
					</div>
				</div>
			</div>
		</div>

		
		<div class="card-box pb-10">
			<div class="h5 pd-20 mb-0" >Confirm Bookings</div>
			<table   id="confirm-booking-table" class="data-table table nowrap">
				<thead>
					<tr>
						<th>Sn.</th>
						<th>Name</th>
						<th>Date</th>
						<th>Total Price</th>
						<th>Total Min Amount To Pay</th>
						<th>Paid Amount</th>
						<th>Remaining Amount To Pay</th>
						<th>Booking Status</th>
						<th>Branch Name</th>
						
					</tr>
				</thead>
				<tbody ></tbody>
					
			</table>
		</div>

		<div class="title pb-20 pt-20">
			<h2 class="h3 mb-0">Quick Start</h2>
		</div>

		<div class="row">
			<div class="col-md-4 mb-20">
				<a href="#" class="card-box d-block mx-auto pd-20 text-secondary">
					<div class="img pb-30">
						<img src="https://dropways.github.io/deskapp/vendors/images/medicine-bro.svg" alt="" />
					</div>
					<div class="content">
						<h3 class="h4">Services</h3>
						<p class="max-width-200">
							We provide superior health care in a compassionate maner
						</p>
					</div>
				</a>
			</div>
			<div class="col-md-4 mb-20">
				<a href="#" class="card-box d-block mx-auto pd-20 text-secondary">
					<div class="img pb-30">
						<img src="https://dropways.github.io/deskapp/vendors/images/remedy-amico.svg" alt="" />
					</div>
					<div class="content">
						<h3 class="h4">Medications</h3>
						<p class="max-width-200">
							Look for prescription and over-the-counter drug information.
						</p>
					</div>
				</a>
			</div>
			<div class="col-md-4 mb-20">
				<a href="#" class="card-box d-block mx-auto pd-20 text-secondary">
					<div class="img pb-30">
						<img src="https://dropways.github.io/deskapp/vendors/images/paper-map-cuate.svg" alt="" />
					</div>
					<div class="content">
						<h3 class="h4">Locations</h3>
						<p class="max-width-200">
							Convenient locations when and where you need them.
						</p>
					</div>
				</a>
			</div>
		</div>

		{{template "footer.html"}}
	

<script>
    $(document).ready(function () {
        // Initialize DataTable
        var table = $('#confirm-booking-table').DataTable();
        // Make an AJAX request to fetch data from the URL
        $.ajax({
            url: '/admin/get/confirm/booking/top5', // Adjust the URL to match your API endpoint
            method: 'GET',
            dataType: 'json',
            success: function (response) {
                console.log(response);
                // Iterate through the data and append it to the table
                $.each(response.data, function (index, branchs) {
                    // Determine the button content based on the "Status"
                    var button;
                    if (branchs.Booking_status === 1) {
                        button = "<button type='button' class='btn btn-outline-success'>Free</button>";
                    } else if(branchs.Booking_status === 3){
						button = "<button type='button' class='btn btn-outline-success'>Confirmed</button>";
					}else {
                        button = "<button type='button' class='btn btn-outline-danger'>reserve</button>";
                    }
                    var action = '<div class="dropdown">' +
                        '<a class="btn btn-link font-24 p-0 line-height-1 no-arrow dropdown-toggle" href="/view/package/' + branchs.ID + '" role="button" data-toggle="dropdown">' +
                        '<i class="dw dw-more"></i>' +
                        '</a>' +
                        '<div class="dropdown-menu dropdown-menu-right dropdown-menu-icon-list">' +
                        '<a class="dropdown-item" href="update/branch?id=' + branchs.ID + '"><i class="dw dw-edit2"></i> Edit</a>' +
                        '<a class="dropdown-item" href="/branchs" onclick="deleteCarousel(' + branchs.ID + ');"><i class="dw dw-delete-3"></i> Delete</a>' +
                        '</div>' +
                        '</div>';

                    // Create a new row and append it to the table
                    table.row.add([
                        index + 1, // Sn.
                        branchs.User_name, 
                        branchs.Date,
                        branchs.Total_price,
                        branchs.Total_min_amount_to_pay,
                        branchs.Paid_amount, 
						branchs.Remaining_amount_to_pay, 
                        button, 
                        branchs.Branch_name,
                        
                    ]);
                });

                // Refresh the table to apply the changes
                table.draw();
            },
            error: function (error) {
                console.error('Error fetching data: ' + error);
            }
        });
    });
    function deleteCarousel(Id) {
        var row_id = Id;
        
        
        $.ajax({
            url: "/admin/delete/branch/" + Id,
            method: "DELETE",
            success: function (response) {
                var rowid = 'rowN' + row_id;
                alert(rowid);
                var rowElement = document.getElementById(rowid);
                if (rowElement) {
                    rowElement.style.display = 'none';
                    alert("branch with ID: " + Id + " deleted successfully");
                }
            },
            error: function (xhr, status, error) {
                console.error(error);
                alert("Error deleting branch with ID: " + Id);
            }
        });
    }
    
</script>
<script>
	$(document).ready(function () {
		// Make an AJAX request to fetch data from the backend
		$.ajax({
			url: "admin/get/live/data",
			method: "GET",
			dataType: 'json',
			success: function (data) {
				// Update the HTML with the fetched data
				$('#user-name').text(data.data.Full_Name);
				$('#contact-number').text(data.data.Contact);
				$('#start-time').text(data.data.start_time);
				$('#end-time').text(data.data.End_time);
			},
			error: function (error) {
				console.error('Error fetching data:', error);
			}
		});
	});
	
</script>
<script>
    $(document).ready(function () {
        // Make an AJAX request to fetch the total user count
        $.ajax({
            url: "/admin/user/count", // Replace with the actual API endpoint
            method: "GET",
            dataType: 'json',
            success: function (data) {
                // Update the HTML with the fetched count
                $('#total-user-count').text(data.data);
            },
            error: function (error) {
                console.error('Error fetching user count:', error);
            }
        });
    });
</script>
<script>
    $(document).ready(function () {
        // Make an AJAX request to fetch the total user count
        $.ajax({
            url: "/admin/total/today/booking", // Replace with the actual API endpoint
            method: "GET",
            dataType: 'json',
            success: function (data) {
                // Update the HTML with the fetched count
                $('#total-booking-count').text(data.data);
            },
            error: function (error) {
                console.error('Error fetching user count:', error);
            }
        });
    });
</script>




       
         




   


   
</body>
</html>

    